<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Next Retail Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { background: #f8f9fa; }
    .card { border-radius: 1rem; box-shadow: 0 3px 8px rgba(0,0,0,0.1); }
    .chart-container { height: 300px; }
    .workflow-step { padding: 10px; margin: 5px; border-radius: 8px; background: #e9ecef; }
    .approved { background: #d4edda; }
    .pending { background: #fff3cd; }
    .rejected { background: #f8d7da; }
  </style>
</head>
<body>
  <div class="container-fluid p-4">
    <h1 class="mb-4">Next Retail – User Groups & Approval Workflow Dashboard</h1>

    <!-- Row: KPIs -->
    <div class="row mb-4">
      <div class="col-md-3">
        <div class="card text-center p-3">
          <h5>Total Users</h5>
          <h2 id="totalUsers">0</h2>
        </div>
      </div>
      <div class="col-md-3">
        <div class="card text-center p-3">
          <h5>Pending Approvals</h5>
          <h2 id="pendingApprovals">0</h2>
        </div>
      </div>
      <div class="col-md-3">
        <div class="card text-center p-3">
          <h5>Products in Review</h5>
          <h2 id="productsReview">0</h2>
        </div>
      </div>
      <div class="col-md-3">
        <div class="card text-center p-3">
          <h5>Revenue (This Month)</h5>
          <h2 id="revenue">£0</h2>
        </div>
      </div>
    </div>

    <!-- Row: Charts -->
    <div class="row mb-4">
      <div class="col-md-6">
        <div class="card p-3">
          <h5>User Groups Distribution</h5>
          <div class="chart-container">
            <canvas id="userGroupChart"></canvas>
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="card p-3">
          <h5>Approval Status Overview</h5>
          <div class="chart-container">
            <canvas id="approvalChart"></canvas>
          </div>
        </div>
      </div>
    </div>

    <!-- Row: Workflow -->
    <div class="row mb-4">
      <div class="col-md-12">
        <div class="card p-3">
          <h5>Approval Workflow</h5>
          <div class="d-flex flex-wrap">
            <div class="workflow-step pending">Step 1: Product Submission</div>
            <div class="workflow-step approved">Step 2: Manager Review</div>
            <div class="workflow-step pending">Step 3: Compliance Check</div>
            <div class="workflow-step rejected">Step 4: Final Approval</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Row: Data Table -->
    <div class="row">
      <div class="col-md-12">
        <div class="card p-3">
          <h5>Product Approval Queue</h5>
          <table class="table table-hover">
            <thead>
              <tr>
                <th>Product ID</th>
                <th>Name</th>
                <th>Group</th>
                <th>Status</th>
                <th>Submitted By</th>
              </tr>
            </thead>
            <tbody id="productTable"></tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Dummy data (replace with backend API later)
    const dashboardData = {
      users: [
        { name: "Alice", group: "Admin" },
        { name: "Bob", group: "Manager" },
        { name: "Charlie", group: "Reviewer" },
        { name: "David", group: "Reviewer" },
        { name: "Eve", group: "Submitter" }
      ],
      approvals: [
        { productId: "NXT001", name: "Blue Denim Jacket", group: "Clothing", status: "Pending", submittedBy: "Alice" },
        { productId: "NXT002", name: "Leather Boots", group: "Footwear", status: "Approved", submittedBy: "Bob" },
        { productId: "NXT003", name: "Smartwatch Series 5", group: "Accessories", status: "Rejected", submittedBy: "Eve" },
        { productId: "NXT004", name: "Casual T-Shirt", group: "Clothing", status: "Pending", submittedBy: "Charlie" }
      ],
      revenue: 45230
    };

    // KPIs
    document.getElementById("totalUsers").textContent = dashboardData.users.length;
    document.getElementById("pendingApprovals").textContent = dashboardData.approvals.filter(a => a.status === "Pending").length;
    document.getElementById("productsReview").textContent = dashboardData.approvals.length;
    document.getElementById("revenue").textContent = "£" + dashboardData.revenue.toLocaleString();

    // Populate table
    const tableBody = document.getElementById("productTable");
    dashboardData.approvals.forEach(a => {
      const row = `<tr>
        <td>${a.productId}</td>
        <td>${a.name}</td>
        <td>${a.group}</td>
        <td><span class="badge ${a.status === 'Approved' ? 'bg-success' : a.status === 'Pending' ? 'bg-warning' : 'bg-danger'}">${a.status}</span></td>
        <td>${a.submittedBy}</td>
      </tr>`;
      tableBody.innerHTML += row;
    });

    // User Groups Chart
    const groupCounts = {};
    dashboardData.users.forEach(u => groupCounts[u.group] = (groupCounts[u.group] || 0) + 1);
    new Chart(document.getElementById("userGroupChart"), {
      type: 'pie',
      data: {
        labels: Object.keys(groupCounts),
        datasets: [{ data: Object.values(groupCounts), backgroundColor: ['#007bff','#28a745','#ffc107','#17a2b8','#6c757d'] }]
      }
    });

    // Approval Status Chart
    const statusCounts = {};
    dashboardData.approvals.forEach(a => statusCounts[a.status] = (statusCounts[a.status] || 0) + 1);
    new Chart(document.getElementById("approvalChart"), {
      type: 'bar',
      data: {
        labels: Object.keys(statusCounts),
        datasets: [{
          label: 'Approvals',
          data: Object.values(statusCounts),
          backgroundColor: ['#28a745','#ffc107','#dc3545']
        }]
      }
    });
  </script>
</body>
</html>
